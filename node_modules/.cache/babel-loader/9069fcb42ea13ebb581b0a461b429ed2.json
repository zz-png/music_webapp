{"ast":null,"code":"var _jsxFileName = \"F:\\\\music_webapp\\\\src\\\\components\\\\playbar\\\\child-components\\\\rightControl\\\\Musiclist\\\\lyric-content\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { memo, useEffect, useRef } from 'react';\nimport { nanoid } from 'nanoid';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { LyricContentWrapper } from './style';\nimport { scrollLyric } from '@/utils/scroll-lyric';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _c2 = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(function LyricContent() {\n  _s();\n\n  const {\n    songIndex,\n    lyriclist,\n    lyricIndex\n  } = useSelector(state => ({\n    songIndex: state.getIn(['player', 'songIndex']),\n    lyriclist: state.getIn(['player', 'lyriclist']),\n    lyricIndex: state.getIn(['player', 'lyricIndex'])\n  }), shallowEqual);\n  const lyric = lyriclist && lyriclist[songIndex];\n  const lyricRef = useRef();\n  useEffect(() => {\n    if (lyricIndex >= 0 && lyricIndex < 4) {\n      lyricRef.current.scrollTop = 0;\n      return;\n    } // 直接设置scrollTop也可以实现滚动效果，但是没有过渡动画不太好看\n    // lyricRef.current.scrollTop = (lyricIndex - 3) * 32\n\n\n    scrollLyric(lyricRef.current, (lyricIndex - 3) * 32, 300);\n  }, [lyricIndex]);\n  return /*#__PURE__*/_jsxDEV(LyricContentWrapper, {\n    ref: lyricRef,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lyric-content\",\n      children: lyric && lyric.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'lyric-item' + (lyricIndex === index ? ' active' : ''),\n          children: item.content\n        }, nanoid(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}, \"zuxD3glQKCNO1pAfO5DMeqltscs=\", false, function () {\n  return [useSelector];\n})), \"zuxD3glQKCNO1pAfO5DMeqltscs=\", false, function () {\n  return [useSelector];\n});\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","memo","useEffect","useRef","nanoid","shallowEqual","useSelector","LyricContentWrapper","scrollLyric","LyricContent","songIndex","lyriclist","lyricIndex","state","getIn","lyric","lyricRef","current","scrollTop","map","item","index","content"],"sources":["F:/music_webapp/src/components/playbar/child-components/rightControl/Musiclist/lyric-content/index.js"],"sourcesContent":["import React, {memo, useEffect, useRef} from 'react'\r\nimport {nanoid} from 'nanoid'\r\nimport {shallowEqual, useSelector} from 'react-redux'\r\n\r\nimport { LyricContentWrapper } from './style'\r\nimport {scrollLyric} from '@/utils/scroll-lyric'\r\n\r\nexport default memo(function LyricContent() {\r\n\r\n  const { songIndex, lyriclist, lyricIndex } = useSelector(state => ({\r\n    songIndex: state.getIn(['player', 'songIndex']),\r\n    lyriclist: state.getIn(['player', 'lyriclist']),\r\n    lyricIndex: state.getIn(['player', 'lyricIndex']),\r\n  }), shallowEqual)\r\n\r\n  const lyric = lyriclist && lyriclist[songIndex]\r\n\r\n  const lyricRef = useRef()\r\n  useEffect(() => {\r\n    if (lyricIndex >= 0 && lyricIndex < 4) {\r\n      lyricRef.current.scrollTop = 0\r\n      return\r\n    }\r\n    // 直接设置scrollTop也可以实现滚动效果，但是没有过渡动画不太好看\r\n    // lyricRef.current.scrollTop = (lyricIndex - 3) * 32\r\n    scrollLyric(lyricRef.current, (lyricIndex - 3) * 32, 300)\r\n  }, [lyricIndex])\r\n\r\n  return (\r\n    <LyricContentWrapper ref={lyricRef}>\r\n      <div className=\"lyric-content\">\r\n        {lyric && lyric.map((item, index) => {\r\n          return (\r\n            <div key={nanoid()} className={'lyric-item' + (lyricIndex === index ? ' active' : '')}>\r\n              {item.content}\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    </LyricContentWrapper>\r\n  )\r\n})\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,IAAf,EAAqBC,SAArB,EAAgCC,MAAhC,QAA6C,OAA7C;AACA,SAAQC,MAAR,QAAqB,QAArB;AACA,SAAQC,YAAR,EAAsBC,WAAtB,QAAwC,aAAxC;AAEA,SAASC,mBAAT,QAAoC,SAApC;AACA,SAAQC,WAAR,QAA0B,sBAA1B;;AAEA,mDAAeP,IAAI,SAAC,SAASQ,YAAT,GAAwB;EAAA;;EAE1C,MAAM;IAAEC,SAAF;IAAaC,SAAb;IAAwBC;EAAxB,IAAuCN,WAAW,CAACO,KAAK,KAAK;IACjEH,SAAS,EAAEG,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,WAAX,CAAZ,CADsD;IAEjEH,SAAS,EAAEE,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,WAAX,CAAZ,CAFsD;IAGjEF,UAAU,EAAEC,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,YAAX,CAAZ;EAHqD,CAAL,CAAN,EAIpDT,YAJoD,CAAxD;EAMA,MAAMU,KAAK,GAAGJ,SAAS,IAAIA,SAAS,CAACD,SAAD,CAApC;EAEA,MAAMM,QAAQ,GAAGb,MAAM,EAAvB;EACAD,SAAS,CAAC,MAAM;IACd,IAAIU,UAAU,IAAI,CAAd,IAAmBA,UAAU,GAAG,CAApC,EAAuC;MACrCI,QAAQ,CAACC,OAAT,CAAiBC,SAAjB,GAA6B,CAA7B;MACA;IACD,CAJa,CAKd;IACA;;;IACAV,WAAW,CAACQ,QAAQ,CAACC,OAAV,EAAmB,CAACL,UAAU,GAAG,CAAd,IAAmB,EAAtC,EAA0C,GAA1C,CAAX;EACD,CARQ,EAQN,CAACA,UAAD,CARM,CAAT;EAUA,oBACE,QAAC,mBAAD;IAAqB,GAAG,EAAEI,QAA1B;IAAA,uBACE;MAAK,SAAS,EAAC,eAAf;MAAA,UACGD,KAAK,IAAIA,KAAK,CAACI,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,KAAiB;QACnC,oBACE;UAAoB,SAAS,EAAE,gBAAgBT,UAAU,KAAKS,KAAf,GAAuB,SAAvB,GAAmC,EAAnD,CAA/B;UAAA,UACGD,IAAI,CAACE;QADR,GAAUlB,MAAM,EAAhB;UAAA;UAAA;UAAA;QAAA,QADF;MAKD,CANS;IADZ;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAaD,CAlCkB;EAAA,QAE4BE,WAF5B;AAAA,GAAnB;EAAA,QAE+CA,WAF/C;AAAA"},"metadata":{},"sourceType":"module"}