{"ast":null,"code":"var _jsxFileName = \"F:\\\\music_webapp\\\\src\\\\pages\\\\discover\\\\child-pages\\\\recommend\\\\child-components\\\\banner\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { memo, useEffect, useState, useRef, useCallback } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { getTopBannerAsync } from '../../redux/action';\nimport { Carousel } from 'antd';\nimport { BannerWrapper, BannerLeft, BannerRight, BannerControl } from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _c2 = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(function Banner() {\n  _s();\n\n  //在组件自身状态中，保存轮播图索引\n  const [currentIndex, setCurrentIndex] = useState(0); //组件挂载时发送网络请求获取轮播图数据\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getTopBannerAsync());\n  }, [dispatch]); //网络请求成功后，取出保存在redux中的banner数据\n\n  const {\n    banners\n  } = useSelector(state => ({\n    banners: state.getIn(['recommend', 'topBanner'])\n  }), shallowEqual); //refhook保存走马灯节点，以拿到其中的切换轮播图方法prev(),next()\n\n  const carouselRef = useRef(); //模糊背景的Url\n\n  const bgImage = banners && banners[currentIndex] && banners[currentIndex].imageUrl + '?imageView&blur=40x20'; //轮播图切换时，通过更改自身的状态currentIndex(也就是索引值)来修改模糊背景(bannerWrapper中的baImage属性)\n  // const changeBlurImage = (from, to) => {\n  //   setCurrentIndex(to);\n  // }\n  //使用useCallback优化上面的代码\n\n  const changeBlurImage = useCallback((from, to) => {\n    setCurrentIndex(to);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(BannerWrapper, {\n    bgImage: bgImage,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w980 banner\",\n      children: [/*#__PURE__*/_jsxDEV(BannerLeft, {\n        children: /*#__PURE__*/_jsxDEV(Carousel, {\n          autoplay: true,\n          effect: \"fade\",\n          ref: carouselRef,\n          beforeChange: changeBlurImage,\n          children: banners && banners.map(obj => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"#\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: obj.imageUrl,\n                  alt: obj.typeTitle\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 48,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 21\n              }, this)\n            }, obj.imageUrl, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BannerRight, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BannerControl, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => carouselRef.current.prev()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => carouselRef.current.next()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}, \"iXw2mNrg9vtpDrzuQwaif3wAqUM=\", false, function () {\n  return [useDispatch, useSelector];\n})), \"iXw2mNrg9vtpDrzuQwaif3wAqUM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","memo","useEffect","useState","useRef","useCallback","useDispatch","useSelector","shallowEqual","getTopBannerAsync","Carousel","BannerWrapper","BannerLeft","BannerRight","BannerControl","Banner","currentIndex","setCurrentIndex","dispatch","banners","state","getIn","carouselRef","bgImage","imageUrl","changeBlurImage","from","to","map","obj","typeTitle","current","prev","next"],"sources":["F:/music_webapp/src/pages/discover/child-pages/recommend/child-components/banner/index.js"],"sourcesContent":["import React, {memo, useEffect, useState, useRef, useCallback} from 'react'\r\nimport {useDispatch, useSelector, shallowEqual} from 'react-redux'\r\nimport {getTopBannerAsync} from '../../redux/action'\r\nimport {Carousel} from 'antd'\r\nimport {BannerWrapper, BannerLeft, BannerRight, BannerControl} from './style'\r\n\r\nexport default memo(function Banner() {\r\n\r\n  //在组件自身状态中，保存轮播图索引\r\n  const [currentIndex, setCurrentIndex] = useState(0)\r\n\r\n  //组件挂载时发送网络请求获取轮播图数据\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopBannerAsync())\r\n  }, [dispatch])\r\n\r\n  //网络请求成功后，取出保存在redux中的banner数据\r\n  const {banners} = useSelector(state => ({banners: state.getIn(['recommend','topBanner'])}), shallowEqual)\r\n\r\n  //refhook保存走马灯节点，以拿到其中的切换轮播图方法prev(),next()\r\n  const carouselRef = useRef()\r\n\r\n  //模糊背景的Url\r\n  const bgImage = banners && banners[currentIndex] && banners[currentIndex].imageUrl + '?imageView&blur=40x20'\r\n\r\n  //轮播图切换时，通过更改自身的状态currentIndex(也就是索引值)来修改模糊背景(bannerWrapper中的baImage属性)\r\n  // const changeBlurImage = (from, to) => {\r\n  //   setCurrentIndex(to);\r\n  // }\r\n\r\n  //使用useCallback优化上面的代码\r\n  const changeBlurImage = useCallback((from, to) => {\r\n    setCurrentIndex(to);\r\n  }, [])\r\n\r\n  return (\r\n    <BannerWrapper bgImage={bgImage}>\r\n      <div className=\"w980 banner\">\r\n        <BannerLeft>\r\n          <Carousel autoplay effect=\"fade\" ref={carouselRef} beforeChange={changeBlurImage}>\r\n            {\r\n              banners && banners.map(obj => {\r\n                return (\r\n                  <div key={obj.imageUrl}>\r\n                    {/* href=\"song?id=xxxx\" */}\r\n                    <a href=\"#\"><img src={obj.imageUrl} alt={obj.typeTitle}></img></a>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n          </Carousel>\r\n        </BannerLeft>\r\n        <BannerRight></BannerRight>\r\n        <BannerControl>\r\n          <button className=\"btn\" onClick={() => carouselRef.current.prev()}></button>\r\n          <button className=\"btn\" onClick={() => carouselRef.current.next()}></button>\r\n        </BannerControl>\r\n\r\n      </div>\r\n    </BannerWrapper>\r\n  )\r\n})\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,IAAf,EAAqBC,SAArB,EAAgCC,QAAhC,EAA0CC,MAA1C,EAAkDC,WAAlD,QAAoE,OAApE;AACA,SAAQC,WAAR,EAAqBC,WAArB,EAAkCC,YAAlC,QAAqD,aAArD;AACA,SAAQC,iBAAR,QAAgC,oBAAhC;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,SAAQC,aAAR,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,aAAhD,QAAoE,SAApE;;AAEA,mDAAeb,IAAI,SAAC,SAASc,MAAT,GAAkB;EAAA;;EAEpC;EACA,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCd,QAAQ,CAAC,CAAD,CAAhD,CAHoC,CAKpC;;EACA,MAAMe,QAAQ,GAAGZ,WAAW,EAA5B;EAEAJ,SAAS,CAAC,MAAM;IACdgB,QAAQ,CAACT,iBAAiB,EAAlB,CAAR;EACD,CAFQ,EAEN,CAACS,QAAD,CAFM,CAAT,CARoC,CAYpC;;EACA,MAAM;IAACC;EAAD,IAAYZ,WAAW,CAACa,KAAK,KAAK;IAACD,OAAO,EAAEC,KAAK,CAACC,KAAN,CAAY,CAAC,WAAD,EAAa,WAAb,CAAZ;EAAV,CAAL,CAAN,EAA+Db,YAA/D,CAA7B,CAboC,CAepC;;EACA,MAAMc,WAAW,GAAGlB,MAAM,EAA1B,CAhBoC,CAkBpC;;EACA,MAAMmB,OAAO,GAAGJ,OAAO,IAAIA,OAAO,CAACH,YAAD,CAAlB,IAAoCG,OAAO,CAACH,YAAD,CAAP,CAAsBQ,QAAtB,GAAiC,uBAArF,CAnBoC,CAqBpC;EACA;EACA;EACA;EAEA;;EACA,MAAMC,eAAe,GAAGpB,WAAW,CAAC,CAACqB,IAAD,EAAOC,EAAP,KAAc;IAChDV,eAAe,CAACU,EAAD,CAAf;EACD,CAFkC,EAEhC,EAFgC,CAAnC;EAIA,oBACE,QAAC,aAAD;IAAe,OAAO,EAAEJ,OAAxB;IAAA,uBACE;MAAK,SAAS,EAAC,aAAf;MAAA,wBACE,QAAC,UAAD;QAAA,uBACE,QAAC,QAAD;UAAU,QAAQ,MAAlB;UAAmB,MAAM,EAAC,MAA1B;UAAiC,GAAG,EAAED,WAAtC;UAAmD,YAAY,EAAEG,eAAjE;UAAA,UAEIN,OAAO,IAAIA,OAAO,CAACS,GAAR,CAAYC,GAAG,IAAI;YAC5B,oBACE;cAAA,uBAEE;gBAAG,IAAI,EAAC,GAAR;gBAAA,uBAAY;kBAAK,GAAG,EAAEA,GAAG,CAACL,QAAd;kBAAwB,GAAG,EAAEK,GAAG,CAACC;gBAAjC;kBAAA;kBAAA;kBAAA;gBAAA;cAAZ;gBAAA;gBAAA;gBAAA;cAAA;YAFF,GAAUD,GAAG,CAACL,QAAd;cAAA;cAAA;cAAA;YAAA,QADF;UAMD,CAPU;QAFf;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAeE,QAAC,WAAD;QAAA;QAAA;QAAA;MAAA,QAfF,eAgBE,QAAC,aAAD;QAAA,wBACE;UAAQ,SAAS,EAAC,KAAlB;UAAwB,OAAO,EAAE,MAAMF,WAAW,CAACS,OAAZ,CAAoBC,IAApB;QAAvC;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAQ,SAAS,EAAC,KAAlB;UAAwB,OAAO,EAAE,MAAMV,WAAW,CAACS,OAAZ,CAAoBE,IAApB;QAAvC;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAhBF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AA0BD,CAzDkB;EAAA,QAMA3B,WANA,EAaCC,WAbD;AAAA,GAAnB;EAAA,QAMmBD,WANnB,EAaoBC,WAbpB;AAAA"},"metadata":{},"sourceType":"module"}