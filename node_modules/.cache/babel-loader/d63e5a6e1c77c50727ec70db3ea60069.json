{"ast":null,"code":"var _jsxFileName = \"F:\\\\music_webapp\\\\src\\\\pages\\\\discover\\\\child-pages\\\\recommend\\\\child-components\\\\banner\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { getTopBannerAsync } from '../../redux/action';\nimport { Carousel } from 'antd';\nimport { BannerWrapper, BannerLeft, BannerRight, BannerControl } from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Banner() {\n  _s();\n\n  //在组件自身状态中，保存轮播图索引\n  const [currentIndex, setCurrentIndex] = useState(0); //组件挂载时发送网络请求获取轮播图数据\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getTopBannerAsync());\n  }, []); //网络请求成功后，将保存在redux中的banner数据取除\n\n  const {\n    banners\n  } = useSelector(state => ({\n    banners: state.getIn(['recommend', 'topBanner'])\n  }), shallowEqual); //refhook保存走马灯节点，以拿到其中的切换轮播图方法prev(),next()\n\n  const carouselRef = useRef(); //模糊背景的Url\n\n  const bgImage = banners && banners[currentIndex] && banners[currentIndex].imageUrl + '?imageView&blur=40x20'; //轮播图切换时，通过更改自身的状态currentIndex(也就是索引值)来修改模糊背景(bannerWrapper中的baImage属性)\n\n  const changeBlurImage = (from, to) => {\n    setCurrentIndex(to);\n  };\n\n  return /*#__PURE__*/_jsxDEV(BannerWrapper, {\n    bgImage: bgImage,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w980 banner\",\n      children: [/*#__PURE__*/_jsxDEV(BannerLeft, {\n        children: /*#__PURE__*/_jsxDEV(Carousel, {\n          autoplay: true,\n          effect: \"fade\",\n          ref: carouselRef,\n          beforeChange: changeBlurImage,\n          children: banners && banners.map(obj => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: obj.imageUrl,\n                alt: obj.typeTitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 42,\n                columnNumber: 21\n              }, this)\n            }, obj.imageUrl, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BannerRight, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(BannerControl, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => bannerRef.current.prev()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: () => bannerRef.current.next()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Banner, \"A/nFp0ZDTUse8Yus71UVWW5Onuo=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Banner;\n\nvar _c;\n\n$RefreshReg$(_c, \"Banner\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useDispatch","useSelector","shallowEqual","getTopBannerAsync","Carousel","BannerWrapper","BannerLeft","BannerRight","BannerControl","Banner","currentIndex","setCurrentIndex","dispatch","banners","state","getIn","carouselRef","bgImage","imageUrl","changeBlurImage","from","to","map","obj","typeTitle","bannerRef","current","prev","next"],"sources":["F:/music_webapp/src/pages/discover/child-pages/recommend/child-components/banner/index.js"],"sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\r\nimport {useDispatch, useSelector, shallowEqual} from 'react-redux'\r\nimport {getTopBannerAsync} from '../../redux/action'\r\nimport {Carousel} from 'antd'\r\nimport {BannerWrapper, BannerLeft, BannerRight, BannerControl} from './style'\r\n\r\nexport default function Banner() {\r\n\r\n  //在组件自身状态中，保存轮播图索引\r\n  const [currentIndex, setCurrentIndex] = useState(0)\r\n\r\n  //组件挂载时发送网络请求获取轮播图数据\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(getTopBannerAsync())\r\n  }, [])\r\n\r\n  //网络请求成功后，将保存在redux中的banner数据取除\r\n  const {banners} = useSelector(state => ({banners: state.getIn(['recommend','topBanner'])}), shallowEqual)\r\n\r\n  //refhook保存走马灯节点，以拿到其中的切换轮播图方法prev(),next()\r\n  const carouselRef = useRef()\r\n\r\n  //模糊背景的Url\r\n  const bgImage = banners && banners[currentIndex] && banners[currentIndex].imageUrl + '?imageView&blur=40x20'\r\n\r\n  //轮播图切换时，通过更改自身的状态currentIndex(也就是索引值)来修改模糊背景(bannerWrapper中的baImage属性)\r\n  const changeBlurImage = (from, to) => {\r\n    setCurrentIndex(to);\r\n  }\r\n\r\n  return (\r\n    <BannerWrapper bgImage={bgImage}>\r\n      <div className=\"w980 banner\">\r\n        <BannerLeft>\r\n          <Carousel autoplay effect=\"fade\" ref={carouselRef} beforeChange={changeBlurImage}>\r\n            {\r\n              banners && banners.map(obj => {\r\n                return (\r\n                  <div key={obj.imageUrl}>\r\n                    <img src={obj.imageUrl} alt={obj.typeTitle}></img>\r\n                  </div>\r\n                )\r\n              })\r\n            }\r\n          </Carousel>\r\n        </BannerLeft>\r\n        <BannerRight></BannerRight>\r\n        <BannerControl>\r\n          <button className=\"btn\" onClick={() => bannerRef.current.prev()}></button>\r\n          <button className=\"btn\" onClick={() => bannerRef.current.next()}></button>\r\n        </BannerControl>\r\n\r\n      </div>\r\n    </BannerWrapper>\r\n  )\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,MAApC,QAAiD,OAAjD;AACA,SAAQC,WAAR,EAAqBC,WAArB,EAAkCC,YAAlC,QAAqD,aAArD;AACA,SAAQC,iBAAR,QAAgC,oBAAhC;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,SAAQC,aAAR,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,aAAhD,QAAoE,SAApE;;AAEA,eAAe,SAASC,MAAT,GAAkB;EAAA;;EAE/B;EACA,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,CAAD,CAAhD,CAH+B,CAK/B;;EACA,MAAMc,QAAQ,GAAGZ,WAAW,EAA5B;EAEAH,SAAS,CAAC,MAAM;IACde,QAAQ,CAACT,iBAAiB,EAAlB,CAAR;EACD,CAFQ,EAEN,EAFM,CAAT,CAR+B,CAY/B;;EACA,MAAM;IAACU;EAAD,IAAYZ,WAAW,CAACa,KAAK,KAAK;IAACD,OAAO,EAAEC,KAAK,CAACC,KAAN,CAAY,CAAC,WAAD,EAAa,WAAb,CAAZ;EAAV,CAAL,CAAN,EAA+Db,YAA/D,CAA7B,CAb+B,CAe/B;;EACA,MAAMc,WAAW,GAAGjB,MAAM,EAA1B,CAhB+B,CAkB/B;;EACA,MAAMkB,OAAO,GAAGJ,OAAO,IAAIA,OAAO,CAACH,YAAD,CAAlB,IAAoCG,OAAO,CAACH,YAAD,CAAP,CAAsBQ,QAAtB,GAAiC,uBAArF,CAnB+B,CAqB/B;;EACA,MAAMC,eAAe,GAAG,CAACC,IAAD,EAAOC,EAAP,KAAc;IACpCV,eAAe,CAACU,EAAD,CAAf;EACD,CAFD;;EAIA,oBACE,QAAC,aAAD;IAAe,OAAO,EAAEJ,OAAxB;IAAA,uBACE;MAAK,SAAS,EAAC,aAAf;MAAA,wBACE,QAAC,UAAD;QAAA,uBACE,QAAC,QAAD;UAAU,QAAQ,MAAlB;UAAmB,MAAM,EAAC,MAA1B;UAAiC,GAAG,EAAED,WAAtC;UAAmD,YAAY,EAAEG,eAAjE;UAAA,UAEIN,OAAO,IAAIA,OAAO,CAACS,GAAR,CAAYC,GAAG,IAAI;YAC5B,oBACE;cAAA,uBACE;gBAAK,GAAG,EAAEA,GAAG,CAACL,QAAd;gBAAwB,GAAG,EAAEK,GAAG,CAACC;cAAjC;gBAAA;gBAAA;gBAAA;cAAA;YADF,GAAUD,GAAG,CAACL,QAAd;cAAA;cAAA;cAAA;YAAA,QADF;UAKD,CANU;QAFf;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAcE,QAAC,WAAD;QAAA;QAAA;QAAA;MAAA,QAdF,eAeE,QAAC,aAAD;QAAA,wBACE;UAAQ,SAAS,EAAC,KAAlB;UAAwB,OAAO,EAAE,MAAMO,SAAS,CAACC,OAAV,CAAkBC,IAAlB;QAAvC;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAQ,SAAS,EAAC,KAAlB;UAAwB,OAAO,EAAE,MAAMF,SAAS,CAACC,OAAV,CAAkBE,IAAlB;QAAvC;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAfF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAyBD;;GAnDuBnB,M;UAMLT,W,EAOCC,W;;;KAbIQ,M"},"metadata":{},"sourceType":"module"}