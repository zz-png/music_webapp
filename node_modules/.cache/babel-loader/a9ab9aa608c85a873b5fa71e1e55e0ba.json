{"ast":null,"code":"var _jsxFileName = \"F:\\\\music_webapp\\\\src\\\\components\\\\playbar\\\\child-components\\\\middleContent\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { memo, useRef, useCallback } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { getSizeImage, formatTime } from '@/utils/format-data';\nimport { Slider } from 'antd';\nimport { MidWrapper } from './style';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _c2 = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(function MidContent(props) {\n  _s();\n\n  const {\n    songIndex,\n    playlist\n  } = useSelector(state => ({\n    songIndex: state.getIn(['player', 'songIndex']),\n    playlist: state.getIn(['player', 'playlist'])\n  }));\n  const currentSong = playlist && playlist[songIndex]; // playedTime\n\n  const {\n    musicdom,\n    playTime,\n    setPlayTime,\n    sliderValue,\n    setSliderValue,\n    setFlag\n  } = props; // 拖动进度条\n\n  const sliderBeforeChange = useCallback(value => {\n    // 拖动时让右边的播放时间跟着改变，进度条的值也要改变\n    setFlag(true);\n    let time = value / 100 * currentSong.dt;\n    setPlayTime(time);\n    setSliderValue(value);\n  }, [currentSong]); // 松开进度条\n\n  const sliderAfterChange = useCallback(value => {\n    const time = value * currentSong.dt / 100000;\n    musicdom.current.currentTime = time;\n    setFlag(false);\n  }, [currentSong]);\n  return /*#__PURE__*/_jsxDEV(MidWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(NavLink, {\n      to: \"/discover/song\",\n      className: \"image\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: playlist[songIndex] && getSizeImage(playlist[songIndex].al.picUrl, 34),\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"play-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"song-info\",\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/discover/song\",\n          className: \"song-name\",\n          children: playlist[songIndex] && playlist[songIndex].name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"singer-name\",\n          children: playlist[songIndex] && playlist[songIndex].ar[0].name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Slider, {\n        tooltipVisible: false,\n        value: sliderValue,\n        onChange: sliderBeforeChange,\n        onAfterChange: sliderAfterChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"song-time\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"now-time\",\n        children: formatTime(playTime)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"total-time\",\n        children: [\"\\xA0/\\xA0\", playlist[songIndex] ? formatTime(playlist[songIndex].dt) : '00:00']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}, \"prgzP1U8An9MewXrnw2zsRxEamc=\", false, function () {\n  return [useSelector];\n})), \"prgzP1U8An9MewXrnw2zsRxEamc=\", false, function () {\n  return [useSelector];\n});\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","memo","useRef","useCallback","useSelector","useDispatch","shallowEqual","NavLink","getSizeImage","formatTime","Slider","MidWrapper","MidContent","props","songIndex","playlist","state","getIn","currentSong","musicdom","playTime","setPlayTime","sliderValue","setSliderValue","setFlag","sliderBeforeChange","value","time","dt","sliderAfterChange","current","currentTime","al","picUrl","name","ar"],"sources":["F:/music_webapp/src/components/playbar/child-components/middleContent/index.js"],"sourcesContent":["import React, {memo, useRef, useCallback} from 'react'\r\nimport {useSelector, useDispatch, shallowEqual} from 'react-redux'\r\nimport {NavLink} from 'react-router-dom'\r\n\r\n\r\nimport {getSizeImage, formatTime} from '@/utils/format-data'\r\nimport {Slider} from 'antd'\r\nimport {MidWrapper} from './style'\r\n\r\nexport default memo(function MidContent(props) {\r\n\r\n  const {songIndex, playlist} = useSelector((state) => ({\r\n      songIndex: state.getIn(['player', 'songIndex']),\r\n      playlist: state.getIn(['player', 'playlist']),\r\n    })\r\n  )\r\n  const currentSong = playlist && playlist[songIndex]\r\n\r\n  // playedTime\r\n  const {musicdom, playTime, setPlayTime, sliderValue, setSliderValue, setFlag} = props\r\n\r\n  // 拖动进度条\r\n  const sliderBeforeChange = useCallback((value) => {\r\n    // 拖动时让右边的播放时间跟着改变，进度条的值也要改变\r\n    setFlag(true)\r\n    let time = (value / 100) * currentSong.dt\r\n    setPlayTime(time)\r\n    setSliderValue(value)\r\n  }, [currentSong])\r\n\r\n  // 松开进度条\r\n  const sliderAfterChange = useCallback((value) => {\r\n    const time = (value * currentSong.dt) / 100000\r\n    musicdom.current.currentTime = time\r\n    setFlag(false)\r\n  },[currentSong])\r\n\r\n  return (\r\n    <MidWrapper>\r\n      <NavLink to='/discover/song' className=\"image\">\r\n        <img src={playlist[songIndex] && getSizeImage(playlist[songIndex].al.picUrl, 34)} alt=\"\" />\r\n      </NavLink>\r\n      <div className=\"play-detail\">\r\n        <div className=\"song-info\">\r\n          <NavLink to=\"/discover/song\" className=\"song-name\">{playlist[songIndex] && playlist[songIndex].name}</NavLink>\r\n          <a href=\"#\" className=\"singer-name\">{playlist[songIndex] && playlist[songIndex].ar[0].name}</a>\r\n        </div>\r\n        <Slider tooltipVisible={false} value={sliderValue} onChange={sliderBeforeChange} onAfterChange={sliderAfterChange}/>\r\n      </div>\r\n      <div className=\"song-time\">\r\n        <span className=\"now-time\">{formatTime(playTime)}</span>\r\n        <span className=\"total-time\">&nbsp;/&nbsp;{playlist[songIndex] ? formatTime(playlist[songIndex].dt) : '00:00'}</span>\r\n      </div>\r\n    </MidWrapper>\r\n  )\r\n})\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,IAAf,EAAqBC,MAArB,EAA6BC,WAA7B,QAA+C,OAA/C;AACA,SAAQC,WAAR,EAAqBC,WAArB,EAAkCC,YAAlC,QAAqD,aAArD;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AAGA,SAAQC,YAAR,EAAsBC,UAAtB,QAAuC,qBAAvC;AACA,SAAQC,MAAR,QAAqB,MAArB;AACA,SAAQC,UAAR,QAAyB,SAAzB;;AAEA,mDAAeV,IAAI,SAAC,SAASW,UAAT,CAAoBC,KAApB,EAA2B;EAAA;;EAE7C,MAAM;IAACC,SAAD;IAAYC;EAAZ,IAAwBX,WAAW,CAAEY,KAAD,KAAY;IAClDF,SAAS,EAAEE,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,WAAX,CAAZ,CADuC;IAElDF,QAAQ,EAAEC,KAAK,CAACC,KAAN,CAAY,CAAC,QAAD,EAAW,UAAX,CAAZ;EAFwC,CAAZ,CAAD,CAAzC;EAKA,MAAMC,WAAW,GAAGH,QAAQ,IAAIA,QAAQ,CAACD,SAAD,CAAxC,CAP6C,CAS7C;;EACA,MAAM;IAACK,QAAD;IAAWC,QAAX;IAAqBC,WAArB;IAAkCC,WAAlC;IAA+CC,cAA/C;IAA+DC;EAA/D,IAA0EX,KAAhF,CAV6C,CAY7C;;EACA,MAAMY,kBAAkB,GAAGtB,WAAW,CAAEuB,KAAD,IAAW;IAChD;IACAF,OAAO,CAAC,IAAD,CAAP;IACA,IAAIG,IAAI,GAAID,KAAK,GAAG,GAAT,GAAgBR,WAAW,CAACU,EAAvC;IACAP,WAAW,CAACM,IAAD,CAAX;IACAJ,cAAc,CAACG,KAAD,CAAd;EACD,CANqC,EAMnC,CAACR,WAAD,CANmC,CAAtC,CAb6C,CAqB7C;;EACA,MAAMW,iBAAiB,GAAG1B,WAAW,CAAEuB,KAAD,IAAW;IAC/C,MAAMC,IAAI,GAAID,KAAK,GAAGR,WAAW,CAACU,EAArB,GAA2B,MAAxC;IACAT,QAAQ,CAACW,OAAT,CAAiBC,WAAjB,GAA+BJ,IAA/B;IACAH,OAAO,CAAC,KAAD,CAAP;EACD,CAJoC,EAInC,CAACN,WAAD,CAJmC,CAArC;EAMA,oBACE,QAAC,UAAD;IAAA,wBACE,QAAC,OAAD;MAAS,EAAE,EAAC,gBAAZ;MAA6B,SAAS,EAAC,OAAvC;MAAA,uBACE;QAAK,GAAG,EAAEH,QAAQ,CAACD,SAAD,CAAR,IAAuBN,YAAY,CAACO,QAAQ,CAACD,SAAD,CAAR,CAAoBkB,EAApB,CAAuBC,MAAxB,EAAgC,EAAhC,CAA7C;QAAkF,GAAG,EAAC;MAAtF;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF,eAIE;MAAK,SAAS,EAAC,aAAf;MAAA,wBACE;QAAK,SAAS,EAAC,WAAf;QAAA,wBACE,QAAC,OAAD;UAAS,EAAE,EAAC,gBAAZ;UAA6B,SAAS,EAAC,WAAvC;UAAA,UAAoDlB,QAAQ,CAACD,SAAD,CAAR,IAAuBC,QAAQ,CAACD,SAAD,CAAR,CAAoBoB;QAA/F;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAG,IAAI,EAAC,GAAR;UAAY,SAAS,EAAC,aAAtB;UAAA,UAAqCnB,QAAQ,CAACD,SAAD,CAAR,IAAuBC,QAAQ,CAACD,SAAD,CAAR,CAAoBqB,EAApB,CAAuB,CAAvB,EAA0BD;QAAtF;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAKE,QAAC,MAAD;QAAQ,cAAc,EAAE,KAAxB;QAA+B,KAAK,EAAEZ,WAAtC;QAAmD,QAAQ,EAAEG,kBAA7D;QAAiF,aAAa,EAAEI;MAAhG;QAAA;QAAA;QAAA;MAAA,QALF;IAAA;MAAA;MAAA;MAAA;IAAA,QAJF,eAWE;MAAK,SAAS,EAAC,WAAf;MAAA,wBACE;QAAM,SAAS,EAAC,UAAhB;QAAA,UAA4BpB,UAAU,CAACW,QAAD;MAAtC;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAM,SAAS,EAAC,YAAhB;QAAA,wBAA2CL,QAAQ,CAACD,SAAD,CAAR,GAAsBL,UAAU,CAACM,QAAQ,CAACD,SAAD,CAAR,CAAoBc,EAArB,CAAhC,GAA2D,OAAtG;MAAA;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QAXF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAkBD,CA9CkB;EAAA,QAEaxB,WAFb;AAAA,GAAnB;EAAA,QAEgCA,WAFhC;AAAA"},"metadata":{},"sourceType":"module"}