{"ast":null,"code":"import { CHANGE_PLAYLIST } from './constants';\nimport { sendReqToGetSongDetail } from '@/service/player'; // 获取歌曲详情用于添加到播放列表\n\nexport const addToPlaylist = data => ({\n  type: CHANGE_PLAYLIST,\n  data\n});\nexport const addToPlaylistAsync = id => {\n  return (dispatch, getState) => {\n    sendReqToGetSongDetail(id).then(res => {\n      // 先判断播放列表中是否已存在该歌曲\n      const playlist = getState().getIn(['player', 'playlist']);\n\n      if (playlist.findIndex(obj => obj.id === id) === -1) {\n        return;\n      }\n\n      playlist.push(res.songs[0]);\n      dispatch(addToPlaylist(playlist));\n    });\n  };\n};","map":{"version":3,"names":["CHANGE_PLAYLIST","sendReqToGetSongDetail","addToPlaylist","data","type","addToPlaylistAsync","id","dispatch","getState","then","res","playlist","getIn","findIndex","obj","push","songs"],"sources":["F:/music_webapp/src/components/playbar/redux/action.js"],"sourcesContent":["import {CHANGE_PLAYLIST} from './constants'\r\nimport {sendReqToGetSongDetail} from '@/service/player'\r\n\r\n// 获取歌曲详情用于添加到播放列表\r\nexport const addToPlaylist = (data) => ({type: CHANGE_PLAYLIST, data})\r\n\r\nexport const addToPlaylistAsync = (id) => {\r\n  return (dispatch, getState) => {\r\n    sendReqToGetSongDetail(id).then(res => {\r\n      // 先判断播放列表中是否已存在该歌曲\r\n      const playlist = getState().getIn(['player', 'playlist'])\r\n      if(playlist.findIndex(obj => obj.id === id) === -1){\r\n        return\r\n      }\r\n      playlist.push(res.songs[0])\r\n      dispatch(addToPlaylist(playlist))\r\n    })\r\n  }\r\n}"],"mappings":"AAAA,SAAQA,eAAR,QAA8B,aAA9B;AACA,SAAQC,sBAAR,QAAqC,kBAArC,C,CAEA;;AACA,OAAO,MAAMC,aAAa,GAAIC,IAAD,KAAW;EAACC,IAAI,EAAEJ,eAAP;EAAwBG;AAAxB,CAAX,CAAtB;AAEP,OAAO,MAAME,kBAAkB,GAAIC,EAAD,IAAQ;EACxC,OAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;IAC7BP,sBAAsB,CAACK,EAAD,CAAtB,CAA2BG,IAA3B,CAAgCC,GAAG,IAAI;MACrC;MACA,MAAMC,QAAQ,GAAGH,QAAQ,GAAGI,KAAX,CAAiB,CAAC,QAAD,EAAW,UAAX,CAAjB,CAAjB;;MACA,IAAGD,QAAQ,CAACE,SAAT,CAAmBC,GAAG,IAAIA,GAAG,CAACR,EAAJ,KAAWA,EAArC,MAA6C,CAAC,CAAjD,EAAmD;QACjD;MACD;;MACDK,QAAQ,CAACI,IAAT,CAAcL,GAAG,CAACM,KAAJ,CAAU,CAAV,CAAd;MACAT,QAAQ,CAACL,aAAa,CAACS,QAAD,CAAd,CAAR;IACD,CARD;EASD,CAVD;AAWD,CAZM"},"metadata":{},"sourceType":"module"}