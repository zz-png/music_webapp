{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nimport { REHYDRATE } from './constants';\nimport getStoredState from './getStoredState';\nimport createPersistor from './createPersistor'; // try to source setImmediate as follows: setImmediate (global) -> global.setImmediate -> setTimeout(fn, 0)\n\nvar genericSetImmediate = typeof setImmediate === 'undefined' ? global.setImmediate || function (fn) {\n  return setTimeout(fn, 0);\n} : setImmediate;\nexport default function persistStore(store) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var onComplete = arguments[2]; // defaults\n  // @TODO remove shouldRestore\n\n  var shouldRestore = !config.skipRestore;\n  if (process.env.NODE_ENV !== 'production' && config.skipRestore) console.warn('redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead');\n  var purgeKeys = null; // create and pause persistor\n\n  var persistor = createPersistor(store, config);\n  persistor.pause(); // restore\n\n  if (shouldRestore) {\n    genericSetImmediate(function () {\n      getStoredState(config, function (err, restoredState) {\n        // do not persist state for purgeKeys\n        if (purgeKeys) {\n          if (purgeKeys === '*') restoredState = {};else purgeKeys.forEach(function (key) {\n            return Reflect.deleteProperty(restoredState, key);\n          });\n        }\n\n        store.dispatch(rehydrateAction(restoredState, err));\n        complete(err, restoredState);\n      });\n    });\n  } else genericSetImmediate(complete);\n\n  function complete(err, restoredState) {\n    persistor.resume();\n    onComplete && onComplete(err, restoredState);\n  }\n\n  return _extends({}, persistor, {\n    purge: function purge(keys) {\n      purgeKeys = keys || '*';\n      return persistor.purge(keys);\n    }\n  });\n}\n\nfunction rehydrateAction(payload) {\n  var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return {\n    type: REHYDRATE,\n    payload: payload,\n    error: error\n  };\n}","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","REHYDRATE","getStoredState","createPersistor","genericSetImmediate","setImmediate","global","fn","setTimeout","persistStore","store","config","undefined","onComplete","shouldRestore","skipRestore","process","env","NODE_ENV","console","warn","purgeKeys","persistor","pause","err","restoredState","forEach","Reflect","deleteProperty","dispatch","rehydrateAction","complete","resume","purge","keys","payload","error","type"],"sources":["F:/music_webapp/node_modules/redux-persist/es/persistStore.js"],"sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nimport { REHYDRATE } from './constants';\nimport getStoredState from './getStoredState';\nimport createPersistor from './createPersistor';\n\n// try to source setImmediate as follows: setImmediate (global) -> global.setImmediate -> setTimeout(fn, 0)\nvar genericSetImmediate = typeof setImmediate === 'undefined' ? global.setImmediate || function (fn) {\n  return setTimeout(fn, 0);\n} : setImmediate;\n\nexport default function persistStore(store) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var onComplete = arguments[2];\n\n  // defaults\n  // @TODO remove shouldRestore\n  var shouldRestore = !config.skipRestore;\n  if (process.env.NODE_ENV !== 'production' && config.skipRestore) console.warn('redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead');\n\n  var purgeKeys = null;\n\n  // create and pause persistor\n  var persistor = createPersistor(store, config);\n  persistor.pause();\n\n  // restore\n  if (shouldRestore) {\n    genericSetImmediate(function () {\n      getStoredState(config, function (err, restoredState) {\n        // do not persist state for purgeKeys\n        if (purgeKeys) {\n          if (purgeKeys === '*') restoredState = {};else purgeKeys.forEach(function (key) {\n            return Reflect.deleteProperty(restoredState, key);\n          });\n        }\n\n        store.dispatch(rehydrateAction(restoredState, err));\n        complete(err, restoredState);\n      });\n    });\n  } else genericSetImmediate(complete);\n\n  function complete(err, restoredState) {\n    persistor.resume();\n    onComplete && onComplete(err, restoredState);\n  }\n\n  return _extends({}, persistor, {\n    purge: function purge(keys) {\n      purgeKeys = keys || '*';\n      return persistor.purge(keys);\n    }\n  });\n}\n\nfunction rehydrateAction(payload) {\n  var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  return {\n    type: REHYDRATE,\n    payload: payload,\n    error: error\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}